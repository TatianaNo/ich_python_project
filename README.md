# Проект поиска фильмов

Интерактивное консольное приложение для поиска фильмов с использованием MongoDB.

## Быстрый старт

### Подготовка окружения

1. **Создание виртуального окружения:**
   ```bash
   python -m venv .venv
   ```

2. **Активация окружения:**
   - Windows (PowerShell): `.\.venv\Scripts\activate`
   - Windows (CMD): `.venv\Scripts\activate.bat`
   - Linux/Mac: `source .venv/bin/activate`

3. **Установка зависимостей:**
   ```bash
   pip install -r requirements.txt
   ```

### Настройка базы данных

1. **Создайте файл `.env`** на основе `.env.example`:
   ```bash
   cp .env.example .env
   ```

2. **Настройте переменные окружения** в файле `.env`:
   ```env
   MONGO_HOST=localhost
   MONGO_PORT=27017
   MONGO_DB_NAME=films_database
   MONGO_USERNAME=your_username
   MONGO_PASSWORD=your_password
   ```

### Запуск приложения

```bash
python main.py
```

## Функциональность

### 1. Поиск фильмов

#### По ключевому слову
- Поиск по названию и описанию фильма
- Результат ограничен 10 фильмами за запрос
- Поддержка пагинации для просмотра дополнительных результатов

#### По жанру и диапазону годов
- Перед вводом пользователю показываются:
  - Список всех доступных жанров
  - Минимальный и максимальный год выпуска фильмов
- Возможность указать диапазон лет (например: 2005-2012) или конкретный год
- Поддержка пагинации

### 2. Сохранение запросов

Все поисковые запросы автоматически сохраняются в MongoDB:
- Коллекция: `search_queries`
- Включает: текст запроса, тип поиска, временную метку, результаты

### 3. Статистика запросов

- Отображение 5 самых популярных запросов по частоте использования
- Показ последних поисковых запросов
- Аналитика по типам поиска

## Архитектура проекта

```
project/
├── main.py          # Главный файл приложения
├── db.py            # Модуль работы с базой данных
├── ui.py            # Модуль пользовательского интерфейса
├── settings.py      # Настройки и конфигурация
├── requirements.txt # Зависимости проекта
├── .env.example     # Пример файла окружения
└── README.md        # Документация
```

### Модули

- **`main.py`** - Основной цикл приложения и координация модулей
- **`db.py`** - Функции для работы с MongoDB, кэширование соединений
- **`ui.py`** - Пользовательский интерфейс и взаимодействие с консолью
- **`settings.py`** - Загрузка настроек из переменных окружения

## Технологии

- **Python 3.8+**
- **MongoDB** - основная база данных для фильмов
- **PyMongo** - драйвер для работы с MongoDB
- **python-dotenv** - загрузка переменных окружения

## Структура данных

### Коллекция фильмов (films)
```json
{
  "_id": "ObjectId",
  "title": "Название фильма",
  "year": 2023,
  "genre": "Драма",
  "rating": 8.5,
  "description": "Описание фильма"
}
```

### Коллекция запросов (search_queries)
```json
{
  "_id": "ObjectId",
  "query": "поисковый запрос",
  "search_type": "keyword|genre_year",
  "timestamp": "ISODate",
  "results_count": 5
}
```

## Дополнительные возможности

- **Кэширование соединений** - оптимизация производительности БД
- **Валидация ввода** - проверка корректности пользовательского ввода
- **Обработка ошибок** - graceful handling исключений
- **Логирование запросов** - отслеживание активности пользователей

## Примечания

- Приложение поддерживает только русский язык интерфейса
- Все комментарии в коде написаны на английском языке
- Рекомендуется использовать MongoDB версии 4.0+